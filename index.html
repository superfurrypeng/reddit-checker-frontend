<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reddit Shadowban Checker</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 30px; }
    h1 { font-size: 26px; }
    input, textarea { padding: 8px; margin: 6px; }
    button { padding: 8px 14px; margin: 6px; cursor: pointer; }
    table { margin-top: 20px; border-collapse: collapse; width: 60%; }
    table, th, td { border: 1px solid black; padding: 6px; }
    #bulkSection { display: none; margin-top: 20px; }
  </style>
</head>
<body>

  <h1>Reddit Shadowban Checker</h1>

  <h2>Single Username Check</h2>
  <input type="text" id="username" placeholder="Enter Reddit username">
  <button onclick="checkUser()">Check</button>
  <p id="result"></p>

  <div style="margin-top:30px;">
    <button id="bulkTab">Bulk Check</button>
  </div>

  <div id="bulkSection">
    <h2>Bulk Username Check</h2>
    <input type="text" id="accessCode" placeholder="Enter Access Code"><br>
    <textarea id="bulkUsernames" placeholder="Enter usernames separated by space or comma" rows="6" cols="40"></textarea><br>
    <button onclick="runBulkCheck()">Check Usernames</button>
    <div id="bulkResult"></div>
  </div>

  <script>
    function checkUser() {
      const username = document.getElementById("username").value.trim();
      fetch(`https://reddit-checker-8j5n.onrender.com/check/${encodeURIComponent(username)}`)
        .then(res => res.json())
        .then(data => {
          if (data.exists) {
            document.getElementById("result").innerText = `${username} exists ✅`;
          } else {
            document.getElementById("result").innerText = `${username} does not exist ❌`;
          }
        });
    }

    document.getElementById("bulkTab").addEventListener("click", function () {
      document.getElementById("bulkSection").style.display = "block";
    });

    function runBulkCheck() {
      const code = document.getElementById("accessCode").value.trim();
      const usernamesInput = document.getElementById("bulkUsernames").value.trim();
      const usernames = usernamesInput.split(/[\s,]+/);

      fetch("https://reddit-checker-8j5n.onrender.com/bulk-check", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ code, usernames })
      })
        .then(res => res.json())
        .then(data => {
          if (data.error) {
            alert(data.error);
          } else {
            let html = "<table><tr><th>Username</th><th>Status</th></tr>";
            data.results.forEach(r => {
              html += `<tr><td>${r.username}</td><td>${r.exists ? "✅ Exists" : "❌ Not Found"}</td></tr>`;
            });
            html += "</table>";
            document.getElementById("bulkResult").innerHTML = html;
          }
        });
    }
  </script>

</body>
</html>
